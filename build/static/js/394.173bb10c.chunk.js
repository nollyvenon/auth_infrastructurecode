"use strict";(self.webpackChunkavas_auth=self.webpackChunkavas_auth||[]).push([[394],{1314:function(e,n,t){t.d(n,{Z:function(){return c}});var i=t(7313),a=t(5968),o=t(3451),s=t(2704),r=t.n(s),l=t(6417),c=function(e){var n=e.code;return(0,i.useEffect)((function(){new(r())(".copy-button").on("success",(function(e){e.clearSelection(),alert("Code copied to clipboard!")}))}),[]),(0,l.jsxs)("div",{className:"chat-bubble",children:[(0,l.jsx)("div",{className:"code-container",children:(0,l.jsx)(a.Z,{language:"javascript",style:o.Z,showLineNumbers:!0,children:n})}),(0,l.jsx)("button",{className:"copy-button","data-clipboard-text":n,children:"Copy Code"})]})}},5394:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var i=t(7313),a=t(2135),o=t(9860),s=t(9019),r=t(3428),l=t(3405),c=t(9439),m=t(6459),u=t(6573),d=t(603),h=t(2036),p=t(7829),x=t(4313),f=t(2294),g=t(9099),v=t(8089),P=t(7410),b=t(6417),j=function(e){Object.assign({},((0,m.Z)(e),e)),(0,o.Z)();var n=(0,i.useContext)(d.$),t=n.setPage,a=n.setOTP,s=n.setEmail,r=(0,i.useState)(""),l=(0,c.Z)(r,2),j=l[0],y=l[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(p.Z,{alignItems:"center",display:"flex",mt:2,children:[(0,b.jsx)(x.Z,{sx:{flexGrow:1},orientation:"horizontal"}),(0,b.jsx)("h4",{className:"text-2xl font-bold mb-4",children:"Forgot Password"}),(0,b.jsx)(x.Z,{sx:{flexGrow:1},orientation:"horizontal"})]}),(0,b.jsx)(P.J9,{initialValues:{email:"",password:"",submit:null},validationSchema:v.Ry().shape({email:v.Z_().email("Must be a valid email").max(255).required("Email is required")}),children:function(e){var n=e.errors,i=(e.handleBlur,e.handleChange,e.handleSubmit,e.isSubmitting,e.touched);e.values;return(0,b.jsxs)("form",{className:"form",children:[(0,b.jsxs)("div",{className:"container row mx-auto p-4",children:[(0,b.jsx)("label",{htmlFor:"email",children:" Email: "}),(0,b.jsx)(f.Z,{error:Boolean(i.email&&n.email),fullWidth:!0,className:"verification-input",helperText:i.email&&n.email,label:"Email",margin:"normal",name:"email",onBlur:function(e){y(e.target.value)},onChange:function(e){y(e.target.value)},type:"email",value:j,variant:"outlined"})]}),(0,b.jsx)(p.Z,{mt:2,children:(0,b.jsx)(g.Z,{color:"primary",onClick:function(){j?u.Z.get("".concat("http://localhost:3001","/api/check_email?email=").concat(j)).then((function(e){if(200===e.status){var n=Math.floor(9e3*Math.random()+1e3);return console.log(n),a(n),s(j),u.Z.post("".concat({NODE_ENV:"production",PUBLIC_URL:"http://localhost:3001",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_NAME:"/",REACT_APP_VERSION:"v2.0.0"}.API_URL,"/api/send_email"),{OTP:n,recipient_email:j}).then((function(){return t("otp")})).catch(console.log),(0,h.Am)("Password changed successfully, please login!",{type:"success",position:"top-right"})}alert("User with this email does not exist!"),console.log(e.data.message)})).catch(console.log):alert("Please enter your email")},fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Forgot Password"})})]})}})]})},y=t(4427),E=t(1314),C=function(){var e=(0,o.Z)();return(0,b.jsxs)(s.ZP,{container:!0,justifyContent:"space-evenly",alignItems:"center",sx:{backgroundColor:e.palette.common.black,height:"100%",minHeight:"100vh"},children:[(0,b.jsx)(s.ZP,{item:!0,xs:11,sm:7,md:6,lg:5,children:(0,b.jsx)(r.Z,{sx:{overflow:"visible",display:"flex",position:"relative","& .MuiCardContent-root":{flexGrow:1,flexBasis:"50%",width:"50%"},maxWidth:"475px",margin:"24px auto"},children:(0,b.jsx)(l.Z,{sx:{p:e.spacing(5,4,3,4)},children:(0,b.jsxs)(s.ZP,{container:!0,direction:"column",spacing:4,justifyContent:"center",children:[(0,b.jsx)(s.ZP,{item:!0,xs:12,children:(0,b.jsx)(s.ZP,{container:!0,justifyContent:"space-between",children:(0,b.jsx)(s.ZP,{item:!0,children:(0,b.jsx)(a.rU,{to:"/",children:(0,b.jsx)("img",{alt:"Auth method",src:y})})})})}),(0,b.jsx)(s.ZP,{item:!0,xs:12,children:(0,b.jsx)(j,{})})]})})})}),(0,b.jsx)(s.ZP,{item:!0,xs:11,sm:7,md:6,lg:5,children:(0,b.jsx)(E.Z,{code:"\n  import React, { useState } from 'react';\n  import { useContext } from 'react';\n  \n  import axios from 'axios';\n  \n  import { RecoveryContext } from '../../../src/layout/App';\n  // material-ui\n  import { useTheme } from '@mui/material/styles';\n  import { toast } from 'react-toastify';\n  \n  import { Box, Button, Divider, TextField } from '@mui/material';\n  \n  //  third party\n  import * as Yup from 'yup';\n  import { Formik } from 'formik';\n  \n  // ==============================|| FIREBASE LOGIN ||============================== //\n  \n  const FireForgotPassword = ({ ...rest }) => {\n    const theme = useTheme();\n    //let faceio;\n  \n    const { setPage, setOTP, setEmail } = useContext(RecoveryContext);\n    const [userEmail, setUserEmail] = useState('');\n  \n    function sendOtp() {\n      if (userEmail) {\n        axios\n          .get(\"{process.env.PUBLIC_URL}/api/check_email?email={userEmail}\")\n          .then((response) => {\n            if (response.status === 200) {\n              const OTP = Math.floor(Math.random() * 9000 + 1000);\n              console.log(OTP);\n              setOTP(OTP);\n              setEmail(userEmail);\n  \n              axios\n                .post(\"{process.env.API_URL}/api/send_email\", {\n                  OTP,\n                  recipient_email: userEmail\n                })\n                .then(() => setPage('otp'))\n                .catch(console.log);\n              const notify = () => toast('Password changed successfully, please login!', { type: 'success', position: 'top-right' });\n              return notify();\n            } else {\n              alert('User with this email does not exist!');\n              console.log(response.data.message);\n            }\n          })\n          .catch(console.log);\n      } else {\n        alert('Please enter your email');\n      }\n    }\n    //const { errors } = this.state;\n  \n    return (\n      <>\n        <Box alignItems=\"center\" display=\"flex\" mt={2}>\n          <Divider sx={{ flexGrow: 1 }} orientation=\"horizontal\" />\n          <h4 className=\"text-2xl font-bold mb-4\">Forgot Password</h4>\n          <Divider sx={{ flexGrow: 1 }} orientation=\"horizontal\" />\n        </Box>\n  \n        <Formik\n          initialValues={{\n            email: '',\n            password: '',\n            submit: null\n          }}\n          validationSchema={Yup.object().shape({\n            email: Yup.string().email('Must be a valid email').max(255).required('Email is required')\n          })}\n        >\n          {({ errors, handleBlur, handleChange, handleSubmit, isSubmitting, touched, values }) => (\n            <form className=\"form\">\n              <div className=\"container row mx-auto p-4\">\n                <label htmlFor=\"email\"> Email: </label>\n                <TextField\n                  error={Boolean(touched.email && errors.email)}\n                  fullWidth\n                  className=\"verification-input\"\n                  helperText={touched.email && errors.email}\n                  label=\"Email\"\n                  margin=\"normal\"\n                  name=\"email\"\n                  onBlur={(e) => {\n                    setUserEmail(e.target.value);\n                  }}\n                  onChange={(e) => {\n                    setUserEmail(e.target.value);\n                  }}\n                  type=\"email\"\n                  value={userEmail}\n                  variant=\"outlined\"\n                />\n              </div>\n  \n              <Box mt={2}>\n                <Button color=\"primary\" onClick={() => sendOtp()} fullWidth size=\"large\" type=\"submit\" variant=\"contained\">\n                  Forgot Password\n                </Button>\n              </Box>\n            </form>\n          )}\n        </Formik>\n      </>\n    );\n  };\n  \n  export default FireForgotPassword;\n    "})})]})}},6459:function(e,n,t){function i(e){if(null==e)throw new TypeError("Cannot destructure "+e)}t.d(n,{Z:function(){return i}})}}]);